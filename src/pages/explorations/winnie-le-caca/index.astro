---
import BlankLayout from "@/layouts/BlankLayout.astro";
import "../_styles/winnie-le-caca.css";
import memes from "../_scripts/winnie-le-caca/memes.json";

const meta = {
  desc: "Winnie le caca",
  favicon: "/explorations/winnie-le-caca/favicon.svg",
  ogImage: "/explorations/winnie-le-caca/og-image.png",
  title: "Winnie le caca",
};
---

<BlankLayout type="page" {...meta}>
  <nav class="nav">
    <label>
      <input type="radio" name="resolution" value="standard" checked /> Standard
    </label>

    <label>
      <input type="radio" name="resolution" value="hd" /> HD
    </label>

    <label>
      <input type="radio" name="resolution" value="4k" /> 4K
    </label>
  </nav>

  <div class="meme">
    <div class="cell image no1"></div>
    <div class="cell text no1" contenteditable="true" spellcheck="false">
      Écrire ici
    </div>
    <div class="cell image no2"></div>
    <div class="cell text no2" contenteditable="true" spellcheck="false">
      Écrire icitte
    </div>
  </div>

  <div class="buttons-bar">
    <button id="random-url">J'ai de la chance</button>
    <button class="download">
      <svg viewBox="0 0 29.978 29.978">
        <path
          d="M25.462 19.105v6.848H4.515v-6.848H.489v8.861c0 1.111.9 2.012 2.016 2.012h24.967c1.115 0 2.016-.9 2.016-2.012v-8.861h-4.026zM14.62 18.426l-5.764-6.965s-.877-.828.074-.828h3.248V9.217.494S12.049 0 12.793 0h4.572c.536 0 .524.416.524.416V10.424h2.998c1.154 0 .285.867.285.867s-4.904 6.51-5.588 7.193c-.492.495-.964-.058-.964-.058z"
        ></path>
      </svg>
    </button>
  </div>

  <a class="href-download"></a>

  <h2>48 classiques</h2>
  <ul class="classics-list">
    {
      memes.map((meme) => (
        <li>
          <a href={`/explorations/winnie-le-caca/${meme.slug}/`}>
            {meme.no1.text}
          </a>
        </li>
      ))
    }
  </ul>

  <script
    src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"
    is:inline></script>

  <script>
    import "../_scripts/winnie-le-caca/winnie-le-caca.js";

    const randomBtn = document.querySelector("#random-url");
    const links =
      document.querySelectorAll<HTMLLinkElement>(".classics-list a");
    const randomLink = links[Math.floor(Math.random() * links.length)];

    randomBtn?.addEventListener("click", () => randomLink.click());
  </script>
</BlankLayout>
