---
// src/pages/recettes/index.astro
import PageListing from "@/components/PageListing.astro";
import type { PageListingItem } from "@/configs/pageListing";
import DefaultLayout from "@/layouts/DefaultLayout.astro";
import { getCollection } from "astro:content";

const collection = await getCollection("recettes");

// Optional: filter by top-level (no `/` in slug) if you want folder separation
const topLevelEntries = collection.filter((e) => !e.slug.includes("/"));

const items: PageListingItem[] = topLevelEntries.map((entry) => ({
  title: entry.data.title,
  slug: entry.slug,
}));
---

<DefaultLayout title="Recettes" type="page">
  <PageListing basePath="/recettes" items={items} />
</DefaultLayout>
