---
// src/pages/blogue/[slug].astro
import Wysiwyg from "@/components/Wysiwyg.astro";
import BlogLayout from "@/layouts/BlogLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const collection = await getCollection("blogue");
  return collection.map((entry) => ({
    params: { slug: entry.slug },
  }));
}

const collection = await getCollection("blogue");
const slug = Astro.params.slug;
const entry = collection.find((e) => e.slug === slug);

if (!entry) throw new Error(`Billet de blogue non-trouvÃ© ğŸ¤·â€â™‚ï¸: ${slug}`);

const { Content } = await entry.render();

const data = entry.data;
---

<BlogLayout
  title={data.title}
  type={data.type}
  ogImage={data.ogImage}
  hideHeaderImage={data.hideHeaderImage}
>
  <Wysiwyg>
    <Content />
  </Wysiwyg>
</BlogLayout>
